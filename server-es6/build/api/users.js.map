{"version":3,"sources":["../../server/api/users.js"],"names":[],"mappings":";;;;;QAWgB;;;;AAThB,IAAI,MAAM,QAAQ,kBAAR,CAAN;AACJ,IAAI,OAAO,QAAQ,mBAAR,CAAP;AACJ,IAAI,OAAO,QAAQ,mBAAR,CAAP;;;;;;AAOG,SAAS,eAAT,CAAyB,GAAzB,EAA8B,GAA9B,EAAmC;;AAExC,MAAM,SAAS,IAAI,KAAJ,CAAU,EAAV,CAFyB;;AAIxC,OAAK,GAAL,CAAS,MAAT,EAAiB,OAAjB,CAAyB,EAAC,MAAM,EAAC,OAAO,EAAC,WAAW,IAAX,EAAiB,IAAI,IAAJ,EAAU,MAAM,IAAN,EAAnC,EAAP,EAA1B,EAAmF,GAAnF,GAAyF,IAAzF,CAA8F,UAAS,IAAT,EAAc;AAC1G,QAAI,IAAJ,CAAS,IAAT,EAD0G;GAAd,CAA9F,CAJwC;CAAnC","file":"users.js","sourcesContent":["import {r, type, Errors} from'./../utils/thinky.js'\n\nvar Bin = require('./../models/bins')\nvar Post = require('./../models/posts')\nvar User = require('./../models/users')\n\n\n// fetchAuthedUser\n// GET /api/me\n// query params {auth_token}\n// => {userObj}\nexport function fetchAuthedUser(req, res) {\n  \n  const userId = req.token.id\n  \n  User.get(userId).getJoin({bins: {users: {avatarUrl: true, id: true, name: true}}}).run().then(function(user){\n    res.json(user)\n  })\n}\n"]}