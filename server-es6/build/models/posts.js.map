{"version":3,"sources":["../../server/models/posts.js"],"names":[],"mappings":";;AAAA,IAAI,SAAS,QAAQ,sBAAR,CAAT;AACJ,IAAI,IAAI,OAAO,CAAP;AACR,IAAI,OAAO,OAAO,IAAP;;AAEX,IAAI,OAAO,OAAO,WAAP,CAAmB,MAAnB,EAA2B;AACpC,MAAI,KAAK,MAAL,EAAJ;AACA,SAAO,KAAK,MAAL,EAAP;AACA,OAAK,KAAK,MAAL,EAAL;AACA,aAAW,KAAK,MAAL,EAAX;AACA,aAAW,CAAC;AACV,QAAI,KAAK,MAAL,EAAJ;AACA,WAAO,CAAC,KAAK,MAAL,EAAD,CAAP;GAFS,CAAX;AAIA,aAAW,KAAK,IAAL,GAAY,OAAZ,CAAoB,EAAE,GAAF,GAAQ,WAAR,GAAsB,GAAtB,CAA0B,IAA1B,CAApB,CAAX;AACA,YAAU,KAAK,MAAL,EAAV;AACA,SAAO,KAAK,MAAL,EAAP;CAXS,CAAP;;AAcJ,OAAO,OAAP,GAAiB,IAAjB;;AAEA,IAAI,OAAO,QAAQ,SAAR,CAAP;AACJ,IAAI,MAAM,QAAQ,QAAR,CAAN;AACJ,IAAI,WAAW,QAAQ,aAAR,CAAX;;AAEJ,KAAK,SAAL,CAAe,IAAf,EAAqB,QAArB,EAA+B,UAA/B,EAA2C,IAA3C;;AAEA,KAAK,SAAL,CAAe,GAAf,EAAoB,KAApB,EAA2B,OAA3B,EAAoC,IAApC;;AAEA,KAAK,OAAL,CAAa,QAAb,EAAuB,WAAvB,EAAoC,IAApC,EAA0C,QAA1C;;AAEA,KAAK,WAAL,CAAiB,WAAjB;AACA,KAAK,WAAL,CAAiB,iBAAjB,EAAoC,CAAC,EAAE,GAAF,CAAM,OAAN,CAAD,EAAiB,EAAE,GAAF,CAAM,WAAN,CAAjB,CAApC","file":"posts.js","sourcesContent":["var thinky = require('./../utils/thinky.js')\nvar r = thinky.r\nvar type = thinky.type\n\nvar Post = thinky.createModel(\"Post\", {\n  id: type.string(),\n  title: type.string(),\n  url: type.string(),\n  mediaType: type.string(),\n  reactions: [{\n    id: type.string(),\n    users: [type.string()]\n  }],\n  createdAt: type.date().default(r.now().toEpochTime().mul(1000)),\n  authorId: type.string(),\n  binId: type.string()\n})\n\nmodule.exports = Post;\n\nvar User = require('./users')\nvar Bin = require('./bins')\nvar Reaction = require('./reactions')\n// a post belongs to a user\nPost.belongsTo(User, \"author\", \"authorId\", \"id\")\n// a post belongs to a bin\nPost.belongsTo(Bin, \"bin\", \"binId\", \"id\")\n// a post has many reactions\nPost.hasMany(Reaction, \"reactions\", \"id\", \"postId\")\n\nPost.ensureIndex(\"createdAt\")\nPost.ensureIndex(\"binId_createdAt\", [r.row('binId'), r.row('createdAt')])\n"]}