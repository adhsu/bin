{"version":3,"sources":["../../server/utils/scraper.js"],"names":[],"mappings":";;;;;QAEgB;;;;;;;;AAAT,SAAS,SAAT,CAAmB,GAAnB,EAAwB,GAAxB,EAA4B;;AAEjC,MAAM,MAAM,IAAI,IAAJ,CAAS,GAAT,CAFqB;AAGjC,UAAQ,GAAR,CAAY,yBAAZ,EAAuC,GAAvC,EAHiC;AAIjC,MAAI,IAAI,QAAJ,CAAa,KAAb,KAAuB,IAAI,QAAJ,CAAa,MAAb,CAAvB,IAA+C,IAAI,QAAJ,CAAa,KAAb,CAA/C,IAAsE,IAAI,QAAJ,CAAa,MAAb,CAAtE,IAA8F,IAAI,QAAJ,CAAa,KAAb,CAA9F,IAAqH,IAAI,QAAJ,CAAa,KAAb,CAArH,EAA0I;AAC5I,WAAO,IAAI,IAAJ,CAAS,EAAC,IAAI,KAAJ,EAAV,CAAP,CAD4I;GAA9I;;;;AAJiC,MAU7B,SAAS,gCAAkB,IAAI,IAAJ,CAAS,GAAT,EAAc,EAAE,SAAS,IAAT,EAAlC,CAAT,CAV6B;;AAYjC,SAAO,EAAP,CAAU,OAAV,EAAmB,YAAU;AAC3B,QAAI,IAAJ,CAAS;AACP,UAAI,IAAJ;AACA,YAAM;AACJ,iBAAS,OAAO,KAAP;AACT,mBAAW,OAAO,OAAP;AACX,gBAAQ,OAAO,IAAP;AACR,iBAAS,OAAO,KAAP;AACT,mBAAW,OAAO,OAAP;AACX,yBAAiB,OAAO,aAAP;AACjB,uBAAe,OAAO,WAAP;OAPjB;KAFF,EAD2B;GAAV,CAAnB,CAZiC;;AA2BjC,SAAO,EAAP,CAAU,OAAV,EAAmB,UAAS,GAAT,EAAa;AAC9B,QAAI,IAAJ,CAAS,EAAC,MAAO,OAAP,EAAV,EAD8B;GAAb,CAAnB,CA3BiC;;AA+BjC,SAAO,KAAP,GA/BiC;CAA5B","file":"scraper.js","sourcesContent":["import MetaInspector from 'node-metainspector'\n\nexport function grabTitle(req, res){\n\n  const url = req.body.url\n  console.log('grabbing title with url', url)\n  if (url.endsWith('gif') || url.endsWith('gifv') || url.endsWith('jpg') || url.endsWith('jpeg') || url.endsWith('mov') || url.endsWith('png')) {\n    return res.send({ok: false})\n  } \n\n  // handle airbnb and imgur variations \n\n  var client = new MetaInspector(req.body.url, { timeout: 5000 });\n\n  client.on(\"fetch\", function(){\n    res.json({\n      ok: true,\n      data: {\n        'title': client.title,\n        'ogTitle': client.ogTitle,\n        'host': client.host,\n        'image': client.image,\n        'ogImage': client.ogImage,\n        'ogDescription': client.ogDescription,\n        'description': client.description\n      }\n    })\n  })\n\n  client.on(\"error\", function(err){\n    res.json({\"ok\" : \"false\"})\n  })\n\n  client.fetch()\n\n}\n\n"]}